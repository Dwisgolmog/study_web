<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>array sort, map, filter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>
<body>
    <div class="container">
        <div class="row">
        </div>
    </div> 
    <div class="container">
        <button class="btn btn-danger sort">이름순 정렬</button>
    </div>

    <div class="container" style="margin-top: 30px;">
        <button class="btn btn-danger price">6만원 이하 상품만 보기</button>
    </div>
    
    <div class="container" style="margin-top: 30px;">
        <button class="btn btn-danger discount">10%할인 받기</button>
    </div>


    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script>

        //상품관련된 데이터
        var products = [
          { id : 0, price : 70000, title : 'Blossom Dress' },
          { id : 1, price : 50000, title : 'Springfield Shirt' },
          { id : 2, price : 60000, title : 'Black Monastery' }
        ];
        
        //정렬 버튼 클릭시 이름순으로 정렬
        $('.sort').click(function(){
            //오름정렬  (원본을 변형함)
            products.sort(function(a,b){
            if(a.title > b.title) return -1;
            if(a.title < b.title) return 1;
            if(a.title == b.title) return 0;
            })

            //초기화 후 다시 정렬
            $('.row').html('');
            EachFor(products,'.row');
        })

        //버튼 클릭시 6만원이하 상품만 보이게 함 
        $('.price').click(function(){
            //sort와 다르게 filter은 원본을 변형하지 않음 -> 이때문에 변수에 저장해서 사용
            let filterdata = products.filter(function(data){
                return data.price <= 60000;
            })

            $('.row').html('');
            EachFor(filterdata,'.row');
        })

        $('.discount').click(function(){
            //map은 요소를 한번에 변경할때 사용한다. ->filter와 마찬가지로 원본을 변형하지 않음
            let mapData = products.map(function(data){
                return data.price * 0.9;
            })
            
            //map으로 할인한 가격을 products에 삽입
            products.forEach((item,index) => {
                item.price = mapData[index];
            })

            $('.row').html('');
            EachFor(products,'.row');
        })


        //받은 데이터를 뿌리는 역할
        function EachFor(data,adr){
            data.forEach(item => {
                const box = `<div class="col-sm-4">
                    <img src="https://via.placeholder.com/600" class="w-100">
                    <h5>${item.title}</h5>
                    <p>가격 :${item.price}</p>
                     </div>`;
                $(adr).append(box);
            })
        }

        //처음 화면 뿌리는 역할
        EachFor(products,'.row');
    </script>
</body>
</html>